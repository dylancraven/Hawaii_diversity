---
title: "Tables for MS"
author: "D. Craven et al."
date: "May 2019"
output: word_document
---
  
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(knitr,quietly = TRUE)
require(dplyr,quietly = TRUE)
require(tidyr, quietly=TRUE)
```

**Table 1.**  Summary of number of plots, sampled area, and environmental conditions across forest plots in the Hawaiian archipelago
 (native & alien).   
```{r, echo=FALSE}
dat<-read.csv("/home/dylan/Dropbox (iDiv)/Research_projects/Veg. monitoring databases/databases and field protocols/database/IslandForests/Hawaii_only/Diversity_Age/Hawaii_diversity/Cleaned_Data/HawIslandsAbundance_2SizeClasses_100plus.csv",header=T)

datt<-filter(dat, SizeClass==5) %>%
  filter(., Native_Status=="alien" |Native_Status=="native")

haw_study<-select(datt, PlotID, geo_entity2, Plot_Area, Elev_m, MAT,MAP, AridInd, SubstrateAge_range ) %>%
           distinct(.)

haw_study<-haw_study %>%
           group_by(geo_entity2)%>%
           summarise(totPlotArea=sum(Plot_Area), mean_MAT=mean(MAT), mean_MAP=mean(MAP), 
                     mean_Arid=mean(AridInd),min_Arid=min(AridInd), max_Arid=max(AridInd),
                     min_Elev=min(Elev_m),max_Elev=max(Elev_m), soilAge=mean(SubstrateAge_range,na.rm=T),                       PlotN=length(unique(PlotID)))
haw_study$r_Arid<-haw_study$max_Arid-haw_study$min_Arid
haw_study$r_Elev<-haw_study$max_Elev-haw_study$min_Elev

haw_study$geo_entity2<-factor(haw_study$geo_entity2, levels=c("Hawai'i Island","Maui Nui", "O'ahu Island", "Kaua'i Island"))

haw_study$totPlotArea<-round(haw_study$totPlotArea, digits=0)
haw_study$mean_MAT<-round(haw_study$mean_MAT, digits=1)
haw_study$mean_MAP<-round(haw_study$mean_MAP, digits=0)
haw_study$mean_Arid<-round(haw_study$mean_Arid, digits=2)
haw_study$r_Arid<-round(haw_study$r_Arid, digits=2)
haw_study$r_Elev<-round(haw_study$r_Elev, digits=0)

inds<-summarise(group_by(datt, geo_entity2), Abundance_tot_raw=sum(Abundance))

haw_study<-left_join(haw_study, inds, by="geo_entity2")

haw_study<-select(haw_study, "Islands"=geo_entity2,"Plots (#)"=PlotN, "Sampled area (m2)"=totPlotArea, "Individuals (#)"= Abundance_tot_raw, 
                  "MAT (C)"=mean_MAT, "MAP (mm yr-1)"=mean_MAP, "Aridity (MAP/PET)"=mean_Arid, "Aridity range"=r_Arid,
                  "Elevation range (m)"=r_Elev, "Soil age (y)"=soilAge)

haw_study<-arrange(haw_study, Islands)

haw_study<-kable(haw_study,format="markdown",align="c",digits=1, caption="Table 1. Summary of number of plots, sampled area, and environmental conditions across forest plots in the Hawaiian archipelago.")
haw_study

```


**Table 2.** Sampled area, number of plots, and number of individuals and species per island across the Hawaiian archipelago (10 plots; native species; both sampling scenarios).      
```{r, echo=FALSE}

std<- function(x,y,z){
  SE<-x/sqrt(y) # standard error
  E<-qt(0.975,df=y-1)*SE
  low_95<-z-E
  hi_95<-z+E
  CIs<-list(low_95,hi_95)
  return(CIs)
}

haw_scen2<-read.csv("/home/dylan/Dropbox (iDiv)/Research_projects/Veg. monitoring databases/databases and field protocols/database/IslandForests/Hawaii_only/Diversity_Age/Hawaii_diversity/Cleaned_Data/Scen2_Natives_10plots_Envconditions_summarized.csv",header=T)
haw_scen2<-select(haw_scen2, geo_entity2, "PlotArea_Scen2"=m_PlotArea,sd_PlotArea,"rangeArid_scen2"=r_Arid, "meanArid_scen2"=mean_Arid, "rangeElev_scen2"=r_Elev)

haw_scen2$n<-100
CIs_2<-std(haw_scen2$sd_PlotArea,haw_scen2$n,haw_scen2$PlotArea_Scen2)
haw_scen2<-cbind.data.frame(haw_scen2,CIs_2[1],CIs_2[2])
colnames(haw_scen2)[8]<-"PlotArea_loCI_Scen2"
colnames(haw_scen2)[9]<-"PlotArea_hiCI_Scen2"

haw_scen2<-select(haw_scen2, geo_entity2,PlotArea_Scen2,PlotArea_loCI_Scen2,PlotArea_hiCI_Scen2, rangeArid_scen2,rangeElev_scen2)

haw_scen3<-read.csv("/home/dylan/Dropbox (iDiv)/Research_projects/Veg. monitoring databases/databases and field protocols/database/IslandForests/Hawaii_only/Diversity_Age/Hawaii_diversity/Cleaned_Data/Scen3_Natives_10plots_Envconditions_summarized.csv",sep=",",header=T)

haw_scen3<-select(haw_scen3, geo_entity2, "PlotArea_scen3"=m_PlotArea,sd_PlotArea,"rangeArid_scen3"=r_Arid,"rangeElev_scen3"=r_Elev)

haw_scen3$n<-100
CIs_2<-std(haw_scen3$sd_PlotArea,haw_scen3$n,haw_scen3$PlotArea_scen3)
haw_scen3<-cbind.data.frame(haw_scen3,CIs_2[1],CIs_2[2])
colnames(haw_scen3)[7]<-"PlotArea_loCI_scen3"
colnames(haw_scen3)[8]<-"PlotArea_hiCI_scen3"

haw_scen3<-select(haw_scen3, geo_entity2,PlotArea_scen3,PlotArea_loCI_scen3,PlotArea_hiCI_scen3, rangeArid_scen3,rangeElev_scen3)

haw_scenn<-left_join(haw_scen2,haw_scen3,by="geo_entity2")

haw_scenn$geo_entity2<-factor(haw_scenn$geo_entity2, levels=c("Hawai'i Island","Maui Nui", "O'ahu Island", "Kaua'i Island"))

haw_scenn$PlotArea_Scen2<-round(haw_scenn$PlotArea_Scen2, digits=0)
haw_scenn$PlotArea_loCI_Scen2<-round(haw_scenn$PlotArea_loCI_Scen2, digits=0)
haw_scenn$PlotArea_hiCI_Scen2<-round(haw_scenn$PlotArea_hiCI_Scen2, digits=0)

haw_scenn$PlotArea_Scen2<-paste(haw_scenn$PlotArea_Scen2, "(",haw_scenn$PlotArea_loCI_Scen2,",",haw_scenn$PlotArea_hiCI_Scen2,")")

#Whaw_scenn$meanArid_scen2<-round(haw_scenn$meanArid_scen2, digits=2)
haw_scenn$rangeArid_scen2<-round(haw_scenn$rangeArid_scen2, digits=2)
haw_scenn$rangeElev_scen2<-round(haw_scenn$rangeElev_scen2, digits=2)

haw_scenn$PlotArea_scen3<-round(haw_scenn$PlotArea_scen3, digits=0)
haw_scenn$PlotArea_loCI_scen3<-round(haw_scenn$PlotArea_loCI_scen3, digits=0)
haw_scenn$PlotArea_hiCI_scen3<-round(haw_scenn$PlotArea_hiCI_scen3, digits=0)
haw_scenn$PlotArea_scen3<-paste(haw_scenn$PlotArea_scen3, "(",haw_scenn$PlotArea_loCI_scen3,",",haw_scenn$PlotArea_hiCI_scen3,")")

#haw_scenn$meanArid_scen3<-round(haw_scenn$meanArid_scen3, digits=2)
haw_scenn$rangeArid_scen3<-round(haw_scenn$rangeArid_scen3, digits=2)

haw_scenn<-select(haw_scenn, geo_entity2, PlotArea_Scen2, rangeArid_scen2, rangeElev_scen2,PlotArea_scen3, rangeArid_scen3,rangeElev_scen3)
haw_scenn<-arrange(haw_scenn, geo_entity2)

haw_scenn<-kable(haw_scenn,format="markdown",align="c",digits=1, caption="Table 2. Summary of sampled area and the range and mean of PET for each sampling scenario across forest plots in the Hawaiian archipelago (just native species).")
haw_scenn


```

**Table 3.** Sampled area, number of plots, and number of individuals and species per island across the Hawaiian archipelago (10 plots; native & alien species; both sampling scenarios).      
```{r, echo=FALSE}

std<- function(x,y,z){
  SE<-x/sqrt(y) # standard error
  E<-qt(0.975,df=y-1)*SE
  low_95<-z-E
  hi_95<-z+E
  CIs<-list(low_95,hi_95)
  return(CIs)
}

haw_scen2<-read.csv("/home/dylan/Dropbox (iDiv)/Research_projects/Veg. monitoring databases/databases and field protocols/database/IslandForests/Hawaii_only/Diversity_Age/Hawaii_diversity/Cleaned_Data/Scen2_Total_10plots_Envconditions_summarized.csv",header=T)
haw_scen2<-select(haw_scen2, geo_entity2, "PlotArea_Scen2"=m_PlotArea,sd_PlotArea,"rangeArid_scen2"=r_Arid, "meanArid_scen2"=mean_Arid, "rangeElev_scen2"=r_Elev)

haw_scen2$n<-100
CIs_2<-std(haw_scen2$sd_PlotArea,haw_scen2$n,haw_scen2$PlotArea_Scen2)
haw_scen2<-cbind.data.frame(haw_scen2,CIs_2[1],CIs_2[2])
colnames(haw_scen2)[8]<-"PlotArea_loCI_Scen2"
colnames(haw_scen2)[9]<-"PlotArea_hiCI_Scen2"

haw_scen2<-select(haw_scen2, geo_entity2,PlotArea_Scen2,PlotArea_loCI_Scen2,PlotArea_hiCI_Scen2, rangeArid_scen2,rangeElev_scen2)

haw_scen3<-read.csv("/home/dylan/Dropbox (iDiv)/Research_projects/Veg. monitoring databases/databases and field protocols/database/IslandForests/Hawaii_only/Diversity_Age/Hawaii_diversity/Cleaned_Data/Scen3_Total_10plots_EnvConditions_summarized.csv",sep=",",header=T)

haw_scen3<-select(haw_scen3, geo_entity2, "PlotArea_scen3"=m_PlotArea,sd_PlotArea,"rangeArid_scen3"=r_Arid, "rangeElev_scen3"=r_Elev)

haw_scen3$n<-100
CIs_2<-std(haw_scen3$sd_PlotArea,haw_scen3$n,haw_scen3$PlotArea_scen3)
haw_scen3<-cbind.data.frame(haw_scen3,CIs_2[1],CIs_2[2])
colnames(haw_scen3)[7]<-"PlotArea_loCI_scen3"
colnames(haw_scen3)[8]<-"PlotArea_hiCI_scen3"

haw_scen3<-select(haw_scen3, geo_entity2,PlotArea_scen3,PlotArea_loCI_scen3,PlotArea_hiCI_scen3, rangeArid_scen3,rangeElev_scen3)

haw_scenn<-left_join(haw_scen2,haw_scen3,by="geo_entity2")

haw_scenn$geo_entity2<-factor(haw_scenn$geo_entity2, levels=c("Hawai'i Island","Maui Nui", "O'ahu Island", "Kaua'i Island"))

haw_scenn$PlotArea_Scen2<-round(haw_scenn$PlotArea_Scen2, digits=0)
haw_scenn$PlotArea_loCI_Scen2<-round(haw_scenn$PlotArea_loCI_Scen2, digits=0)
haw_scenn$PlotArea_hiCI_Scen2<-round(haw_scenn$PlotArea_hiCI_Scen2, digits=0)

haw_scenn$PlotArea_Scen2<-paste(haw_scenn$PlotArea_Scen2, "(",haw_scenn$PlotArea_loCI_Scen2,",",haw_scenn$PlotArea_hiCI_Scen2,")")

#haw_scenn$meanArid_scen2<-round(haw_scenn$meanArid_scen2, digits=2)
haw_scenn$rangeArid_scen2<-round(haw_scenn$rangeArid_scen2, digits=2)

haw_scenn$PlotArea_scen3<-round(haw_scenn$PlotArea_scen3, digits=0)
haw_scenn$PlotArea_loCI_scen3<-round(haw_scenn$PlotArea_loCI_scen3, digits=0)
haw_scenn$PlotArea_hiCI_scen3<-round(haw_scenn$PlotArea_hiCI_scen3, digits=0)
haw_scenn$PlotArea_scen3<-paste(haw_scenn$PlotArea_scen3, "(",haw_scenn$PlotArea_loCI_scen3,",",haw_scenn$PlotArea_hiCI_scen3,")")

#haw_scenn$meanArid_scen3<-round(haw_scenn$meanArid_scen3, digits=2)
haw_scenn$rangeArid_scen3<-round(haw_scenn$rangeArid_scen3, digits=2)

haw_scenn<-select(haw_scenn, geo_entity2, PlotArea_Scen2, rangeArid_scen2,rangeElev_scen2,PlotArea_scen3, rangeArid_scen3,rangeElev_scen3)
haw_scenn<-arrange(haw_scenn, geo_entity2)

haw_scenn<-kable(haw_scenn,format="markdown",align="c",digits=1, caption="Table 3. Summary of sampled area and the range and mean of PET for each sampling scenario across forest plots in the Hawaiian archipelago (native & alien species).")
haw_scenn
```

**Table 3.** Sampled area, number of plots, and number of individuals and species per island across the Hawaiian archipelago (10 plots; only alien species; both sampling scenarios).      
```{r, echo=FALSE}

std<- function(x,y,z){
  SE<-x/sqrt(y) # standard error
  E<-qt(0.975,df=y-1)*SE
  low_95<-z-E
  hi_95<-z+E
  CIs<-list(low_95,hi_95)
  return(CIs)
}

haw_scen2<-read.csv("/home/dylan/Dropbox (iDiv)/Research_projects/Veg. monitoring databases/databases and field protocols/database/IslandForests/Hawaii_only/Diversity_Age/Hawaii_diversity/Cleaned_Data/Scen2_Aliens_10plots_Envconditions_summarized.csv",header=T)

haw_scen2<-select(haw_scen2, geo_entity2, "PlotArea_Scen2"=m_PlotArea,sd_PlotArea,"rangeArid_scen2"=r_Arid,  "rangeElev_scen2"=r_Elev)

haw_scen2$n<-100
CIs_2<-std(haw_scen2$sd_PlotArea,haw_scen2$n,haw_scen2$PlotArea_Scen2)
haw_scen2<-cbind.data.frame(haw_scen2,CIs_2[1],CIs_2[2])
colnames(haw_scen2)[7]<-"PlotArea_loCI_Scen2"
colnames(haw_scen2)[8]<-"PlotArea_hiCI_Scen2"

haw_scen2<-select(haw_scen2, geo_entity2,PlotArea_Scen2,PlotArea_loCI_Scen2,PlotArea_hiCI_Scen2, rangeArid_scen2,rangeElev_scen2)

haw_scen3<-read.csv("/home/dylan/Dropbox (iDiv)/Research_projects/Veg. monitoring databases/databases and field protocols/database/IslandForests/Hawaii_only/Diversity_Age/Hawaii_diversity/Cleaned_Data/Scen3_Aliens_10plots_EnvConditions_summarized.csv",sep=",",header=T)


haw_scen3<-select(haw_scen3, geo_entity2, "PlotArea_scen3"=m_PlotArea,sd_PlotArea,"rangeArid_scen3"=r_Arid, "rangeElev_scen3"=r_Elev)

haw_scen3$n<-100
CIs_2<-std(haw_scen3$sd_PlotArea,haw_scen3$n,haw_scen3$PlotArea_scen3)
haw_scen3<-cbind.data.frame(haw_scen3,CIs_2[1],CIs_2[2])
colnames(haw_scen3)[7]<-"PlotArea_loCI_scen3"
colnames(haw_scen3)[8]<-"PlotArea_hiCI_scen3"

haw_scen3<-select(haw_scen3, geo_entity2,PlotArea_scen3,PlotArea_loCI_scen3,PlotArea_hiCI_scen3, rangeArid_scen3,rangeElev_scen3)

haw_scenn<-left_join(haw_scen2,haw_scen3,by="geo_entity2")

haw_scenn$geo_entity2<-factor(haw_scenn$geo_entity2, levels=c("Hawai'i Island","Maui Nui", "O'ahu Island", "Kaua'i Island"))

haw_scenn$PlotArea_Scen2<-round(haw_scenn$PlotArea_Scen2, digits=0)
haw_scenn$PlotArea_loCI_Scen2<-round(haw_scenn$PlotArea_loCI_Scen2, digits=0)
haw_scenn$PlotArea_hiCI_Scen2<-round(haw_scenn$PlotArea_hiCI_Scen2, digits=0)

haw_scenn$PlotArea_Scen2<-paste(haw_scenn$PlotArea_Scen2, "(",haw_scenn$PlotArea_loCI_Scen2,",",haw_scenn$PlotArea_hiCI_Scen2,")")

#haw_scenn$meanArid_scen2<-round(haw_scenn$meanArid_scen2, digits=2)
haw_scenn$rangeArid_scen2<-round(haw_scenn$rangeArid_scen2, digits=2)

haw_scenn$PlotArea_scen3<-round(haw_scenn$PlotArea_scen3, digits=0)
haw_scenn$PlotArea_loCI_scen3<-round(haw_scenn$PlotArea_loCI_scen3, digits=0)
haw_scenn$PlotArea_hiCI_scen3<-round(haw_scenn$PlotArea_hiCI_scen3, digits=0)
haw_scenn$PlotArea_scen3<-paste(haw_scenn$PlotArea_scen3, "(",haw_scenn$PlotArea_loCI_scen3,",",haw_scenn$PlotArea_hiCI_scen3,")")

#haw_scenn$meanArid_scen3<-round(haw_scenn$meanArid_scen3, digits=2)
haw_scenn$rangeArid_scen3<-round(haw_scenn$rangeArid_scen3, digits=2)

haw_scenn<-select(haw_scenn, geo_entity2, PlotArea_Scen2, rangeArid_scen2,rangeElev_scen2,PlotArea_scen3, rangeArid_scen3,rangeElev_scen3)
haw_scenn<-arrange(haw_scenn, geo_entity2)

haw_scenn<-kable(haw_scenn,format="markdown",align="c",digits=1, caption="Table 3. Summary of sampled area and the range and mean of PET for each sampling scenario across forest plots in the Hawaiian archipelago (native & alien species).")
haw_scenn
```